<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi sitio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="../static/styles/homee.css" rel="stylesheet"  type="text/css">
    <link rel="stylesheet" href="{{ url_for('static', filename='/styles/output.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='/styles/_table.css') }}">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
</head>
<body>

    <!-- Incluir el encabezado -->
    {% include './components/base/header.html' %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script>
      var dtb = (id, options) => {
        const table = document.getElementById(id);
        if (!table) return;
    
        const type = table.getAttribute("type");
        if (type == "matricial") {
            if (options == null) options = { responsive: true };
            else options.responsive = false;
            options["type"] = type;
        }
    
        // @ts-ignore
        const _dtbConfig = $(`#${id}`).DataTable({
            lengthMenu: [
                [15, 25, 50, -1],
                [15, 25, 50, "Todas"],
            ],
            language: {
                lengthMenu: "_MENU_",
                zeroRecords:
                    "<p style='padding-bottom: 0;'> Informacion no Cargada ó No encontrada</p>",
                info: "Mostrando página _PAGE_ de _PAGES_",
                infoEmpty: "Ningún registro disponible",
                infoFiltered:
                    "(información filtrada desde _MAX_ registros en total)",
                paginate: {
                    first: "Primero",
                    last: "Ultimo",
                    next: "Próximo",
                    previous: "Previo",
                },
                search: "",
    
                processing: `
                        <div class="mat-progress-spinner" style="margin: auto; margin-bottom: 12px;">
                            <svg preserveAspectRatio="xMidYMid meet" focusable="false" viewBox="0 0 100 100">
                                <circle cx="50%" cy="50%" r="45" class="ng-star-inserted"
                                    style="animation-name: mat-progress-spinner-stroke-rotate-100;stroke-dasharray: 282.743px;stroke-width: 10%;width: 25px;height: 25px;">
                                </circle>
                            </svg>
                        </div>
    
                        <p>Cargando...</p>
                    `,
            },
            processing: true,
    
            order: [],
            pageLength: 15,
            paging:
                eval(table?.getAttribute("dataTable-pagging")) == false
                    ? false
                    : true,
            responsive: eval(table?.getAttribute("dataTable-responsive")) || true,
    
            ...options,
        });
    
        datatableStyle(id, options || {});
    
        // @ts-ignore
        window.dataTable = _dtbConfig;
        dataTable = _dtbConfig;
        return _dtbConfig;
    };
    
    /* Agregando estilos con nueva img al datatable */
    const datatableStyle = (id, options) => {
        const table = document.querySelector(`#${id}_wrapper`);
        if (!table) return;
    
        const thead = table.querySelector("thead");
        if (table == null || table.getAttribute("procesada") == "true") return;
    
        // Procesando buscado
        const ubicacion_buscador = document.createElement("div");
        if (table.querySelector(`.dataTables_filter`)) {
            ubicacion_buscador.appendChild(
                table.querySelector(".dataTables_filter")
            );
        }
    
        if (table.querySelector(".dataTables_length")) {
            ubicacion_buscador.appendChild(
                table.querySelector(".dataTables_length")
            );
        }
    
        ubicacion_buscador.classList.add("dt_filter");
        ubicacion_buscador
            .querySelector('input[type="search"]')
            ?.setAttribute("placeholder", "Buscar");
    
        try {
            table.insertBefore(ubicacion_buscador, table.querySelector("table"));
        } catch (ex) {}
    
        // Procesando el thead
    
        // - Setiando el alto del thead
        thead.children[0].setAttribute("height", "45px");
    
        if (options.type != "matricial") {
            // - Poniendo el espaciado entre la thead
            const rowSpaceHeader = document.createElement("tr");
            thead.append(rowSpaceHeader);
        }
    
        table.setAttribute("procesada", "true");
    };
    </script>

    <!-- Aquí va el contenido específico de cada página -->
    <div class="content">
        {% block content %}{% endblock %}
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
</body>
</html>
